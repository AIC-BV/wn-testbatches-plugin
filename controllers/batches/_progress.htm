<?php
    $batch = $record->getBatch();
    // $value is the same as $batch->progress()

    $progressCss = ($value > 0 and $value < 100 and $record->finished_at == null) ? 'active': '';

    $barCss = '';

    if (100 == $value) {
        $barCss = 'progress-bar-success';
    }
    $barCss = $record->cancelled_at != null ? 'progress-bar-warning' : $barCss;

    if ($record->failed_jobs >= 1) {
        $barCss = $record->finished_at == null ? 'progress-bar-danger' : $barCss;
    }

    // debug('progress', $value, $batch->progress());
?>
<div class="progress <?= $progressCss ?>" style="height:var(--progress-height, 18px);">
    <div class="progress-bar <?= $barCss ?>" role="progressbar"
        aria-valuenow="<?= $value ?>" aria-valuemin="0" aria-valuemax="100"
        style="width: <?= $value ?>%;">
        <span class="sr-only"><?= $value ?>% Complete</span>
    </div>
</div>
